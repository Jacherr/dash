/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={487:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},12:t=>{var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?n.push(e.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}},t.exports=n},738:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},568:(t,e,n)=>{var r,i,o,a,s;r=n(12),i=n(487).utf8,o=n(738),a=n(487).bin,(s=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?a.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=r.bytesToWords(t),u=8*t.length,c=1732584193,f=-271733879,l=-1732584194,h=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var d=s._ff,y=s._gg,v=s._hh,g=s._ii;for(p=0;p<n.length;p+=16){var w=c,b=f,m=l,_=h;c=d(c,f,l,h,n[p+0],7,-680876936),h=d(h,c,f,l,n[p+1],12,-389564586),l=d(l,h,c,f,n[p+2],17,606105819),f=d(f,l,h,c,n[p+3],22,-1044525330),c=d(c,f,l,h,n[p+4],7,-176418897),h=d(h,c,f,l,n[p+5],12,1200080426),l=d(l,h,c,f,n[p+6],17,-1473231341),f=d(f,l,h,c,n[p+7],22,-45705983),c=d(c,f,l,h,n[p+8],7,1770035416),h=d(h,c,f,l,n[p+9],12,-1958414417),l=d(l,h,c,f,n[p+10],17,-42063),f=d(f,l,h,c,n[p+11],22,-1990404162),c=d(c,f,l,h,n[p+12],7,1804603682),h=d(h,c,f,l,n[p+13],12,-40341101),l=d(l,h,c,f,n[p+14],17,-1502002290),c=y(c,f=d(f,l,h,c,n[p+15],22,1236535329),l,h,n[p+1],5,-165796510),h=y(h,c,f,l,n[p+6],9,-1069501632),l=y(l,h,c,f,n[p+11],14,643717713),f=y(f,l,h,c,n[p+0],20,-373897302),c=y(c,f,l,h,n[p+5],5,-701558691),h=y(h,c,f,l,n[p+10],9,38016083),l=y(l,h,c,f,n[p+15],14,-660478335),f=y(f,l,h,c,n[p+4],20,-405537848),c=y(c,f,l,h,n[p+9],5,568446438),h=y(h,c,f,l,n[p+14],9,-1019803690),l=y(l,h,c,f,n[p+3],14,-187363961),f=y(f,l,h,c,n[p+8],20,1163531501),c=y(c,f,l,h,n[p+13],5,-1444681467),h=y(h,c,f,l,n[p+2],9,-51403784),l=y(l,h,c,f,n[p+7],14,1735328473),c=v(c,f=y(f,l,h,c,n[p+12],20,-1926607734),l,h,n[p+5],4,-378558),h=v(h,c,f,l,n[p+8],11,-2022574463),l=v(l,h,c,f,n[p+11],16,1839030562),f=v(f,l,h,c,n[p+14],23,-35309556),c=v(c,f,l,h,n[p+1],4,-1530992060),h=v(h,c,f,l,n[p+4],11,1272893353),l=v(l,h,c,f,n[p+7],16,-155497632),f=v(f,l,h,c,n[p+10],23,-1094730640),c=v(c,f,l,h,n[p+13],4,681279174),h=v(h,c,f,l,n[p+0],11,-358537222),l=v(l,h,c,f,n[p+3],16,-722521979),f=v(f,l,h,c,n[p+6],23,76029189),c=v(c,f,l,h,n[p+9],4,-640364487),h=v(h,c,f,l,n[p+12],11,-421815835),l=v(l,h,c,f,n[p+15],16,530742520),c=g(c,f=v(f,l,h,c,n[p+2],23,-995338651),l,h,n[p+0],6,-198630844),h=g(h,c,f,l,n[p+7],10,1126891415),l=g(l,h,c,f,n[p+14],15,-1416354905),f=g(f,l,h,c,n[p+5],21,-57434055),c=g(c,f,l,h,n[p+12],6,1700485571),h=g(h,c,f,l,n[p+3],10,-1894986606),l=g(l,h,c,f,n[p+10],15,-1051523),f=g(f,l,h,c,n[p+1],21,-2054922799),c=g(c,f,l,h,n[p+8],6,1873313359),h=g(h,c,f,l,n[p+15],10,-30611744),l=g(l,h,c,f,n[p+6],15,-1560198380),f=g(f,l,h,c,n[p+13],21,1309151649),c=g(c,f,l,h,n[p+4],6,-145523070),h=g(h,c,f,l,n[p+11],10,-1120210379),l=g(l,h,c,f,n[p+2],15,718787259),f=g(f,l,h,c,n[p+9],21,-343485551),c=c+w>>>0,f=f+b>>>0,l=l+m>>>0,h=h+_>>>0}return r.endian([c,f,l,h])})._ff=function(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._gg=function(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._hh=function(t,e,n,r,i,o,a){var s=t+(e^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._ii=function(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(s(t,e));return e&&e.asBytes?n:e&&e.asString?a.bytesToString(n):r.bytesToHex(n)}},404:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(907),s=o(n(568)),u="9914b86dbbbb5d01f801f1da36449021",c=new URL(document.location.href),f=new a.Engine;r(void 0,void 0,void 0,(function(){var t,e,n;return i(this,(function(r){switch(r.label){case 0:return[4,fetch("http://dash.y21_.repl.co/wasm/v1").then((function(t){return t.arrayBuffer()}))];case 1:if(t=r.sent(),e=new Uint8Array(t),(n=s.default(e))!==u)throw new Error("Checksum doesn't match. ("+n+" != "+u+")");return[4,f.init(t)];case 2:return r.sent(),[2]}}))}));var l=document.getElementById("code"),h=document.getElementById("console"),p=document.getElementById("execute-btn"),d=document.getElementById("save"),y=CodeMirror.fromTextArea(l,{lineNumbers:!0,mode:"javascript",theme:"ambiance",extraKeys:{"Ctrl-Space":"autocomplete"}}),v=c.searchParams.get("code");if(v){var g=atob(v);y.setValue(g)}var w=new EmbeddedConsole(h);w.log("Welcome to the dash playground"),w.log('Write JavaScript code in the box above and press "Execute code" to run it.'),w.log("Note that this engine is still a very early work in progress. See progress here: https://github.com/y21/dash/blob/master/progress.md"),p.addEventListener("click",(function(){if(f.initialized)try{var t=y.getValue(),e=f.eval(t),n=Number(e);isNaN(n)?w.log(e):w.log(n)}catch(t){w.error(t)}else w.warn("Cannot use engine before initialization. Please wait a few seconds.")})),d.addEventListener("click",(function(){var t=y.getValue(),e=btoa(t);c.searchParams.set("code",e),document.location.href=c.toString()}))},907:function(t,e){"use strict";var n,r,i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Engine=void 0,function(t){t[t.OK=0]="OK",t[t.ERR=1]="ERR"}(n||(n={})),function(t){t[t.SOME=0]="SOME",t[t.NONE=1]="NONE"}(r||(r={}));var a=function(){function t(t,e){this.internal=t,this.ptr=e}return t.prototype.discriminant=function(){var t=this;return this.internal.withDataView((function(e){return 0===e.getUint8(t.ptr)?n.OK:n.ERR}))},t.prototype.isOk=function(){return this.discriminant()===n.OK},t.prototype.getDataPointer=function(){return this.ptr+4},t.prototype.unwrap=function(t){var e=this.isOk(),n=this.getDataPointer();if(!e){var r=t(n),i=this.internal.readString(r);throw this.internal.wasm.free_c_string(r),new Error(i)}return n},t}(),s=function(){function t(t,e){this.internal=t,this.ptr=e}return t.prototype.discriminant=function(){var t=this;return this.internal.withDataView((function(e){return 0===e.getUint8(t.ptr)?r.SOME:r.NONE}))},t.prototype.isSome=function(){return this.discriminant()===r.SOME},t.prototype.getDataPointer=function(){return this.ptr+4},t}(),u=function(){function t(t){this.wasm=t}return t.prototype.getDataView=function(){return new DataView(this.wasm.memory.buffer)},t.prototype.withDataView=function(t){return t(this.getDataView())},t.prototype.alloc=function(t){var e=this.wasm.alloc(t);return function(t){if(!t)throw new Error("Assertion failed: "+t)}(0!==e),e},t.prototype.writeString=function(t){var e=this.alloc(t.length+1);return this.withDataView((function(n){for(var r=0;r<t.length;++r){var i=t.charCodeAt(r);if(0===i)throw new Error("String cannot contain null characters");n.setUint8(e+r,i)}n.setUint8(e+t.length,0)})),e},t.prototype.readString=function(t){return this.withDataView((function(e){for(var n="",r=0;;++r){var i=e.getUint8(t+r);if(0===i)break;n+=String.fromCharCode(i)}return n}))},t}(),c=function(){function t(t,e,n,r){this.internal=t,this.vmResultPtr=e,this.sourcePtr=n,this.sourceLen=r,this._freed=!1}return t.prototype.free=function(){if(this._freed)throw new Error("This resource has been freed up already");this.internal.wasm.dealloc(this.sourcePtr,this.sourceLen),this.internal.wasm.free_create_vm_result(this.vmResultPtr),this._freed=!0},t.prototype.exec=function(){var t=this.internal.wasm.vm_interpret(this.vmResultPtr),e=new a(this.internal,t);try{var n=e.unwrap(this.internal.wasm.inspect_vm_interpret_error.bind(this.internal)),r=new s(this.internal,n);if(!r.isSome())return;var i=this.internal.wasm.value_inspect(r.getDataPointer()),o=this.internal.readString(i);return this.internal.wasm.free_c_string(i),o}finally{this.internal.wasm.free_vm_interpret_result(t)}},t}(),f=function(){function t(){}return t.prototype.init=function(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,l(t)];case 1:return e=r.sent(),[4,WebAssembly.instantiate(e)];case 2:return n=r.sent(),this.internal=new u(n.instance.exports),[2]}}))}))},Object.defineProperty(t.prototype,"initialized",{get:function(){return Boolean(this.internal)},enumerable:!1,configurable:!0}),t.prototype.getInternal=function(){if(this.internal)return this.internal;throw new Error("This Engine has not been initialized yet. Call init on this instance first and wait for its promise to resolve")},t.prototype.createVM=function(t){var e=this.getInternal(),n=e.writeString(t),r=e.wasm.create_vm(n),i=new a(e,r);try{var o=i.unwrap(e.wasm.inspect_create_vm_error.bind(e));return new c(e,o,n,t.length+1)}catch(i){throw e.wasm.dealloc(n,t.length+1),e.wasm.free_create_vm_result(r),i}},t.prototype.eval=function(t){var e=this.createVM(t),n=e.exec();return e.free(),n},t}();function l(t){return i(this,void 0,void 0,(function(){return o(this,(function(e){return t instanceof ArrayBuffer?[2,t]:t instanceof Uint8Array?[2,t.buffer]:[2,fetch(t).then((function(t){return t.arrayBuffer()}))]}))}))}e.Engine=f}},e={};!function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}(404)})();